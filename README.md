# NGGS-Lite v1.8 (Gemini Edition)

## Overview

NGGS-Lite (Neo-Gothic Text Generation System - Lite) v1.8 is an AI-powered system designed to generate high-quality, Gothic-style text characterized by an "ontological tremor"[cite: 1, 2]. This system aims to create an "opaque, shadow-covered space that resists the homogenization and flattening of modern society" by producing evocative and profound literary experiences[cite: 366, 368, 369, 434, 435, 436, 437]. It leverages the Google Gemini API for its core text generation and evaluation capabilities[cite: 13, 24].

The system not only generates text but also iteratively refines it through a multi-dimensional evaluation process, ensuring continuous improvement towards a sophisticated Gothic literary style[cite: 3, 14].

**Project Directory Structure (Recommended):**
The User Guide (Section 3.5) details the recommended directory structure[cite: 64]. All paths mentioned in configuration or documentation are generally relative to the project root (`/Users/user/Desktop/NGGS＿Project/` as per User Guide context [cite: 1]).

## Current Status

**Version:** 1.8.0 (Gemini Edition - Refactoring Phase)

This version is currently undergoing a comprehensive refactoring and full feature implementation phase. The detailed tasks for this phase have been assigned to an AI agent, **Jules**, as specified in the [Statement of Work for Jules (JULES_SOW_EN.md)](JULES_SOW_EN.md).

The primary script target for this work is `NGGS-Lite_v1_8_refactored.py`, which will evolve into `NGGS-Lite_v1_8_Jules_Implemented.py` upon successful completion by Jules.

## Key Features

NGGS-Lite v1.8 aims to provide a robust platform for Neo-Gothic text generation with the following key features:

* **Advanced LLM Integration:** Utilizes Google Gemini API for high-quality text generation and nuanced evaluation[cite: 13, 24].
* **Iterative Improvement Loop:** Employs a cycle of generation, multi-faceted evaluation, and instruction-based regeneration to enhance text quality progressively[cite: 14].
* **Detailed Evaluation System:** Combines LLM-based assessments with sophisticated heuristic evaluations across several dimensions[cite: 4, 15]:
    * **ETI (Existential Tremor Index):** Measures Gothic atmosphere, stylistic solemnity, indirect emotional expression, vocabulary quality, and specific ETI components like liminality, ambiguity, transcendental violation, uncertainty, and internal transformation[cite: 4, 5].
    * **RI (Readability Index):** Assesses structural clarity, visual rhythm, emotional flow, cognitive load, and interpretive resonance[cite: 7].
    * **Subjectivity Score:** Evaluates the depth and consistency of subjective narration[cite: 8].
    * **Layer/Phase Balance Scores:** Analyzes the distribution and balance of descriptive layers (material, sensory, psychological, symbolic) and narrative phases (dialogue, monologue, narration, etc.)[cite: 9, 10].
    * **Emotion Arc Score:** Tracks the effective transformation of emotions along a predefined arc[cite: 11].
    * **Colloquial/Gothic Blend Score:** Assesses the natural blending of colloquial and literary Gothic expressions based on set levels[cite: 12].
* **Flexible Configuration:** Centralized parameter management via the `NGGSConfig` data class[cite: 16, 57].
* **Vocabulary Management (`VocabularyManager`):** Supports loading external vocabulary files, context-aware filtering, prompt suggestions, and usage tracking[cite: 17, 76, 77, 78, 79, 80, 208, 209, 210, 211, 212, 213, 214].
* **Narrative Structure Support (`NarrativeFlowFramework`):** Analyzes phase/layer structure and generates narrative construction prompt fragments based on themes and emotional arcs[cite: 18].
* **External System Integration:**
    * **NDGS Input:** Capability to parse and utilize contextual information (characters, scene overview, initial text) from JSON files generated by external systems like NDGS (Neo Dimension Gothic Scenario builder)[cite: 19, 29, 287, 288, 289, 290, 291].
    * **GLCAI Vocabulary Feedback:** Generates JSON reports on vocabulary usage during text generation to support external analysis by systems like GLCAI (Gothic Lexicon Curator AI)[cite: 20, 30, 31, 268, 269, 270, 271, 272].
* **Batch Processing:** Facilitates processing multiple input files with options for parallel execution and summary report generation[cite: 21, 33, 34].
* **Robust Error Handling & Logging:** Implements custom exceptions and detailed logging for stable operation[cite: 22, 32, 38].

## Technology Stack

* **Python:** Version 3.8+ (3.9+ recommended)[cite: 40, 41].
* **LLM:** Google Gemini API (via `google-generativeai` library)[cite: 47, 50].
* **Key Python Libraries:** `dataclasses`, `pathlib`, `typing`, `argparse`, `logging`, `json`, `re`.

## Getting Started

### Prerequisites
1.  **Python:** Ensure Python 3.8 or higher is installed[cite: 40].
2.  **Google Gemini API Key:** Obtain an API key from Google AI Studio or your Google Cloud project[cite: 47, 48].
3.  **Install Required Libraries:**
    ```bash
    pip install google-generativeai
    ```
    (Refer to the User Guide Section 3.2 for any specific version requirements [cite: 51, 52]).
4.  **Set Environment Variable:** Set your Gemini API key as an environment variable[cite: 54, 55]:
    ```bash
    # On Linux/macOS
    export GENAI_API_KEY="YOUR_GEMINI_API_KEY"

    # On Windows PowerShell
    $env:GENAI_API_KEY="YOUR_GEMINI_API_KEY"
    ```

### File Structure
It is recommended to follow the directory structure outlined in the User Guide (Section 3.5)[cite: 64]. This includes placing the main script (`nggs_lite_v1.8_refactored.py`), template files (in `templates_v1.8/`), and vocabulary data (in `data/`) in appropriate locations within your project directory (e.g., `/Users/user/Desktop/NGGS＿Project/`).

## Basic Usage

NGGS-Lite v1.8 is operated via the command line.

**Single Job Execution:**

* **Using an input text file:**
    ```bash
    python nggs_lite_v1.8.py --input path/to/your_input.txt --output path/to/your_output_directory
    ```
* **Providing text directly:**
    ```bash
    python nggs_lite_v1.8.py --text "Your haunting introductory sentence..." --output path/to/your_output_directory
    ```
* **Using an NDGS JSON input file:**
    ```bash
    python nggs_lite_v1.8.py --ndgs-input path/to/your_ndgs_scenario.json --output path/to/your_output_directory
    ```
    (See User Guide Section 4.4 for more on NDGS input [cite: 126, 127, 128, 129, 130, 131]).

**Batch Processing:**

```bash
python nggs_lite_v1.8.py --batch path/to/input_files_directory --output path/to/batch_output_directory --max-workers 2

For a full list of command-line parameters and their descriptions, refer to the User Guide (Section 4.3)  or use:
python nggs_lite_v1.8.py --help

Documentation
User Guide: Detailed information on system features, setup, usage, and parameters.
Statement of Work for Jules (AI Agent): The specific tasks assigned to the AI agent Jules for refactoring and completing v1.8.
Development Roadmap: The strategic development plan and future outlook for the NGGS project family.
Current AI-Driven Development Task
The AI agent Jules is currently tasked with the full refactoring, implementation of missing features, and optimization of the NGGS-Lite_v1_8_refactored.py script. All detailed instructions, objectives, and constraints for this task are documented in the Statement of Work for Jules (JULES_SOW_EN.md). The progress and contributions from Jules will be managed through GitHub Issues and Pull Requests in this repository.

License
This project is licensed under the MIT License.

